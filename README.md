# AAU Student Thesis Collaboration Portal

A web portal showcasing student thesis collaborations from Aalborg University.

## Features

- **Interactive Map**: Leaflet-based map with marker clustering showing collaboration locations
- **Advanced Filtering**: Filter by year, education program, collaboration type, geography, and partner
- **Statistics Dashboard**: Trends and insights about research collaborations
- **Daily Sync**: Automated data updates from Pure API via GitHub Actions
- **AAU Branding**: Consistent with Aalborg University visual identity

## Architecture

**Simple & Free:**
```
┌─────────────────────────────────────────┐
│  GitHub Actions (Daily Sync)            │
│  - Fetches Pure API data                │
│  - Generates JSON files                 │
│  - Force pushes to orphan branch        │
└─────────────────────────────────────────┘
                    ▼
┌─────────────────────────────────────────┐
│  Orphan Branch: data-storage            │
│  - NO commit history (privacy!)         │
│  - /data/projects.json                  │
│  - /data/metadata.json                  │
│  - /data/organizations.json             │
│  - /data/search-index.json              │
└─────────────────────────────────────────┘
                    ▲
                    │ Fetch JSON files
┌─────────────────────────────────────────┐
│  AAU Webserver (Frontend)               │
│  - Static Next.js site                  │
│  - Fetches data from GitHub             │
└─────────────────────────────────────────┘
```

**Stack:**
- Frontend: Next.js 14 (static export) hosted on AAU webserver
- Backend: GitHub Actions (Node.js 20) for automated data sync
- Storage: GitHub orphan branch (no history for privacy compliance)
- API: Pure API (Aalborg University research database)

**Privacy by Design:**
Data is stored in an orphan branch with NO commit history. When projects are marked confidential in Pure and removed from the API, they are completely erased from the repository without any traces in git history.

**Cost:** $0/month (GitHub Actions free for public repos)

## Project Structure

```
aau-thesis-portal/
├── packages/
│   ├── shared/      # Shared TypeScript types
│   └── webapp/      # Next.js application
├── data/            # JSON data files (generated by GitHub Actions)
└── .github/
    └── workflows/   # Data sync automation
```

## Setup

### 1. Prerequisites

- Node.js 20+
- npm
- Pure API key

### 2. Install Dependencies

```bash
npm install
```

### 3. Configure GitHub Secrets

Add your Pure API key to GitHub Secrets:
1. Go to repository Settings → Secrets and variables → Actions
2. Add secret: `PURE_API_KEY` with your API key value

### 4. Run Data Sync

The GitHub Actions workflow will run automatically daily at 2 AM UTC.

To trigger manually:
1. Go to Actions tab
2. Select "Sync Pure API Data"
3. Click "Run workflow"

### 5. Build & Deploy Static Site

```bash
# Build static site
npm run build:all

# Output will be in packages/webapp/out/
# Upload to your AAU webserver
```

## Local Development

```bash
# Run webapp locally
npm run dev:webapp
# Visit http://localhost:3000
```

The webapp will fetch data from GitHub when running locally.

## Data Files

GitHub Actions generates these files in the `data-storage` branch:
- `projects.json`: All project data with collaborations
- `metadata.json`: Filter options and statistics
- `organizations.json`: List of partner organizations
- `search-index.json`: Optimized search index

These files are publicly accessible from the orphan branch:
```
https://raw.githubusercontent.com/svidmar/AAU_Student_Project_Collaboration_Portal/data-storage/data/projects.json
```

**Note:** The `data-storage` branch has no commit history - each sync completely replaces the branch to ensure privacy compliance.

## License

MIT
